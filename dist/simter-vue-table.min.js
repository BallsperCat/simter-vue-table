/*!
* simter-vue-table v0.3.1
* @author RJ.Hwang <rongjihuang@gmail.com>
* @license MIT
*/
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global["simter-vue-table"]={})})(this,function(exports){"use strict";
/*!
* simter-vue-colgroup v0.2.6
* @author RJ.Hwang <rongjihuang@gmail.com>
* @license MIT
*/const component={render:function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("colgroup",_vm._l(_vm.widthArray,function(width,index){return _c("col",{key:index,style:{width:width}})}))},staticRenderFns:[],replace:true,props:{columns:{type:Array,required:true}},computed:{widthArray(){return flatten(this.columns)}}};const flatten=columns=>columns.reduce((a,b)=>a.concat(b.children?flatten(b.children):b.width||b),[]).map(a=>typeof a==="object"?a.width:a);
/*!
* simter-vue-thead v0.2.1
* @author RJ.Hwang <rongjihuang@gmail.com>
* @license MIT
*/const component$1={render:function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("thead",{class:_vm.containerClass},_vm._l(_vm.rows,function(row,rowIndex){return _c("tr",{key:"row-"+rowIndex,class:_vm.rowClass},_vm._l(row,function(cell,cellIndex){return _c("th",{key:"cell-"+cellIndex,class:cell.class||_vm.cellClass,attrs:{colspan:cell.colspan,rowspan:cell.rowspan}},[_vm._v(_vm._s(cell.label||cell))])}))}))},staticRenderFns:[],replace:true,props:{columns:{type:Array,required:true},containerClass:{type:String,required:false},rowClass:{type:String,required:false},cellClass:{type:String,required:false}},computed:{rows(){return transform(deepClone(this.columns))}}};function transform(columns){columns=polishing(columns);columns.forEach(column=>{descendantDepth(column);leafCount(column)});const rows=flattenWithSelf(columns,true).reduce(function(result,column){if(!result[column.$_rowIndex])result[column.$_rowIndex]=[column];else result[column.$_rowIndex].push(column);return result},[]);rows.forEach(row=>{row.forEach(column=>{if(column.$_depth===0){const depth=row.filter(c=>c!==column).reduce((a,b)=>Math.max(a,b.$_depth),0);if(depth>0)column.rowspan=depth+1}})});rows.forEach(row=>{row.forEach(column=>{delete column.$_rowIndex;delete column.$_depth})});return rows}function polishing(columns){for(let i=0;i<columns.length;i++){const column=columns[i];if(typeof column==="object"){if(column.children)column.children=polishing(column.children)}else columns[i]={label:column}}return columns}function descendantDepth(column){if(!column.hasOwnProperty("$_rowIndex"))column.$_rowIndex=0;let d;if(column.children&&column.children.length>0){d=0;column.children.forEach(child=>{child.$_rowIndex=column.$_rowIndex+1;d=Math.max(d,descendantDepth(child))});d++}else d=0;column.$_depth=d;return d}function leafCount(column){let count;if(column.children&&column.children.length>0){count=0;column.children.forEach(child=>{count+=leafCount(child)})}else count=1;if(count>1)column.colspan=count;return count}function flattenWithSelf(columns,removeChildren=true){let result=columns.reduce((a,b)=>{if(b.children){return a.concat(b,flattenWithSelf(b.children,removeChildren))}else return a.concat(b)},[]);if(removeChildren)result.forEach(column=>{if(column.hasOwnProperty("children"))delete column.children});return result}function deepClone(obj){let copy;if(null==obj||"object"!==typeof obj)return obj;if(obj instanceof Date){copy=new Date;copy.setTime(obj.getTime());return copy}if(obj instanceof Array){copy=[];for(let i=0,len=obj.length;i<len;i++){copy[i]=deepClone(obj[i])}return copy}if(obj instanceof Object){copy={};for(let attr in obj){if(obj.hasOwnProperty(attr))copy[attr]=deepClone(obj[attr])}return copy}throw new Error("Unable to copy obj! Its type isn't supported.")}const component$2={render:function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("table",{class:_vm.$_classes.table},[_c("st-colgroup",{tag:"colgroup",attrs:{columns:_vm.columns}}),_vm._v(" "),_c("st-thead",{tag:"thead",class:_vm.$_classes.thead,attrs:{columns:_vm.columns}}),_vm._v(" "),_c("tbody",{class:_vm.$_classes.tbody},_vm._l(_vm.rows,function(row,index){return _c("tr",{key:row.id||index},_vm._l(_vm.columnsLeaf,function(column){return _c("td",{key:column.id},[_vm._v(_vm._s(row[column.id]))])}))}))])},staticRenderFns:[],replace:true,props:{columns:{type:Array,required:true},rows:{type:Array,required:false,default(){return[]}},classes:{type:String|Object|Array,required:false,default(){return[]}}},computed:{columnsLeaf(){return flatten$1(this.columns)},$_classes(){if(typeof this.classes==="string"||Array.isArray(this.classes))return{table:this.classes};else if(typeof this.classes==="object")return this.classes;else return{}}},components:{"st-colgroup":component,"st-thead":component$1}};function flatten$1(columns){return columns.reduce((a,b)=>a.concat(b.children?flatten$1(b.children):b),[])}exports.flatten=flatten$1;exports.default=component$2;Object.defineProperty(exports,"__esModule",{value:true})});
//# sourceMappingURL=true