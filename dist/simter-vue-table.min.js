/*!
* simter-vue-table v0.5.0
* @author RJ.Hwang <rongjihuang@gmail.com>
* @license MIT
*/
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global["simter-vue-table"]=factory()})(this,function(){"use strict";
/*!
  * simter-vue-colgroup v0.3.0
  * @author RJ.Hwang <rongjihuang@gmail.com>
  * @license MIT
  */const component={replace:true,props:{columns:{type:Array,required:true}},computed:{widthArray(){return flatten(this.columns)}}};const flatten=columns=>columns.reduce((a,b)=>a.concat(b.children?flatten(b.children):b.width||b),[]).map(a=>typeof a==="object"?a.width:a);const __vue_script__=component;var __vue_render__=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("colgroup",_vm._l(_vm.widthArray,function(width,index){return _c("col",{key:index,style:{width:width}})}))};var __vue_staticRenderFns__=[];__vue_render__._withStripped=true;const __vue_inject_styles__=undefined;const __vue_scope_id__=undefined;const __vue_module_identifier__=undefined;const __vue_is_functional_template__=false;function __vue_normalize__(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component$$1=(typeof script==="function"?script.options:script)||{};component$$1.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-colgroup\\src\\colgroup.vue";if(!component$$1.render){component$$1.render=template.render;component$$1.staticRenderFns=template.staticRenderFns;component$$1._compiled=true;if(functional)component$$1.functional=true}component$$1._scopeId=scope;return component$$1}var colgroup=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,undefined,undefined);
/*!
  * simter-vue-thead v0.3.2
  * @author RJ.Hwang <rongjihuang@gmail.com>
  * @license MIT
  */const component$1={replace:true,props:{columns:{type:Array,required:true},classes:{type:String|Object|Array,required:false,default(){return[]}},styles:{type:String|Object|Array,required:false,default(){return{}}}},computed:{rows(){return transform(deepClone(this.columns))},$_classes(){if(typeof this.classes==="string"||Array.isArray(this.classes))return{thead:this.classes};else if(typeof this.classes==="object")return this.classes;else return{}},$_styles(){if(typeof this.styles==="string"||Array.isArray(this.styles))return{thead:this.styles};else if(typeof this.styles==="object")return this.styles;else return{}}}};function transform(columns){columns=polishing(columns);columns.forEach(column=>{descendantDepth(column);leafCount(column)});const rows=flattenWithSelf(columns,true).reduce(function(result,column){if(!result[column.$_rowIndex])result[column.$_rowIndex]=[column];else result[column.$_rowIndex].push(column);return result},[]);rows.forEach(row=>{row.forEach(column=>{if(column.$_depth===0){const depth=row.filter(c=>c!==column).reduce((a,b)=>Math.max(a,b.$_depth),0);if(depth>0)column.rowspan=depth+1}})});rows.forEach(row=>{row.forEach(column=>{delete column.$_rowIndex;delete column.$_depth})});return rows}function polishing(columns){for(let i=0;i<columns.length;i++){const column=columns[i];if(typeof column==="object"){if(column.children)column.children=polishing(column.children)}else columns[i]={label:column}}return columns}function descendantDepth(column){if(!column.hasOwnProperty("$_rowIndex"))column.$_rowIndex=0;let d;if(column.children&&column.children.length>0){d=0;column.children.forEach(child=>{child.$_rowIndex=column.$_rowIndex+1;d=Math.max(d,descendantDepth(child))});d++}else d=0;column.$_depth=d;return d}function leafCount(column){let count;if(column.children&&column.children.length>0){count=0;column.children.forEach(child=>{count+=leafCount(child)})}else count=1;if(count>1)column.colspan=count;return count}function flattenWithSelf(columns,removeChildren=true){let result=columns.reduce((a,b)=>{if(b.children){return a.concat(b,flattenWithSelf(b.children,removeChildren))}else return a.concat(b)},[]);if(removeChildren)result.forEach(column=>{if(column.hasOwnProperty("children"))delete column.children});return result}function deepClone(obj){let copy;if(null==obj||"object"!==typeof obj)return obj;if(obj instanceof Date){copy=new Date;copy.setTime(obj.getTime());return copy}if(obj instanceof Array){copy=[];for(let i=0,len=obj.length;i<len;i++){copy[i]=deepClone(obj[i])}return copy}if(obj instanceof Object){copy={};for(let attr in obj){if(obj.hasOwnProperty(attr))copy[attr]=deepClone(obj[attr])}return copy}throw new Error("Unable to copy obj! Its type isn't supported.")}const __vue_script__$1=component$1;var __vue_render__$1=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("thead",{class:_vm.$_classes.thead,style:_vm.$_styles.thead},_vm._l(_vm.rows,function(row,rowIndex){return _c("tr",{key:"row-"+rowIndex,class:_vm.$_classes.tr,style:_vm.$_styles.tr},_vm._l(row,function(cell,cellIndex){return _c("th",{key:"cell-"+cellIndex,class:cell.class||_vm.$_classes.th,style:cell.style||_vm.$_styles.th,attrs:{colspan:cell.colspan,rowspan:cell.rowspan}},[_vm._v(_vm._s(cell.label||cell))])}))}))};var __vue_staticRenderFns__$1=[];__vue_render__$1._withStripped=true;const __vue_inject_styles__$1=undefined;const __vue_scope_id__$1=undefined;const __vue_module_identifier__$1=undefined;const __vue_is_functional_template__$1=false;function __vue_normalize__$1(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component$$1=(typeof script==="function"?script.options:script)||{};component$$1.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-thead\\src\\thead.vue";if(!component$$1.render){component$$1.render=template.render;component$$1.staticRenderFns=template.staticRenderFns;component$$1._compiled=true;if(functional)component$$1.functional=true}component$$1._scopeId=scope;return component$$1}var thead=__vue_normalize__$1({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},__vue_inject_styles__$1,__vue_script__$1,__vue_scope_id__$1,__vue_is_functional_template__$1,__vue_module_identifier__$1,undefined,undefined);function flatten$1(columns){return columns.reduce((a,b)=>a.concat(b.children?flatten$1(b.children):b),[])}function groupRows(rows,group){const groupKey=group.prop;const gi={};let rowIndex=-1;let index=-1;const groupedRows=rows.reduce(function(rv,row){const g=row[groupKey];if(!(g in gi))gi[g]=++index;const i=gi[g];rv[i]=rv[i]||{rowIndex:++rowIndex,id:row[groupKey],rows:[]};rv[i].rows.push(row);rowIndex++;for(let j=i+1;j<rv.length;j++)rv[j].rowIndex++;return rv},[]);if(group.names)group.names.filter(g=>!(g in gi)).forEach(g=>groupedRows[groupedRows.length]={rowIndex:++rowIndex,id:g,rows:[]});return groupedRows}var cellBase={props:{columnIndex:{type:Number,required:true},column:{type:Object,required:true},rowIndex:{type:Number,required:true},row:{type:Object,required:true},groupRow:{type:Object,required:false}},computed:{cfg(){return this.column.cell||{}},value(){return this.row[this.column.id]},content(){return this.cfg.render?this.cfg.render.call(this,this.value,this.row):this.value},rc(){return`[${this.rowIndex}, ${this.columnIndex}]`},classes(){return this.cfg.classes||{}},styles(){return this.cfg.styles||{}}},methods:{acceptChange(prop,newValue,oldValue,target){if(newValue!=oldValue){this.$set(this.row,prop,newValue);const data={newValue:newValue,oldValue:oldValue,columnIndex:this.columnIndex,column:this.column,rowIndex:this.rowIndex,row:this.row};if(target)data.target=target;this.$emit("cell-change",data)}}}};var script={extends:cellBase};const __vue_script__$2=script;var __vue_render__$2=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("span",[_vm._v(_vm._s(_vm.content))])};var __vue_staticRenderFns__$2=[];__vue_render__$2._withStripped=true;const __vue_inject_styles__$2=undefined;const __vue_scope_id__$2=undefined;const __vue_module_identifier__$2=undefined;const __vue_is_functional_template__$2=false;function __vue_normalize__$2(template,style,script$$1,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component=(typeof script$$1==="function"?script$$1.options:script$$1)||{};component.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-table\\src\\cell\\text.vue";if(!component.render){component.render=template.render;component.staticRenderFns=template.staticRenderFns;component._compiled=true;if(functional)component.functional=true}component._scopeId=scope;return component}var cellText=__vue_normalize__$2({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,undefined,undefined);var script$1={extends:cellBase};const __vue_script__$3=script$1;var __vue_render__$3=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{domProps:{innerHTML:_vm._s(_vm.content)}})};var __vue_staticRenderFns__$3=[];__vue_render__$3._withStripped=true;const __vue_inject_styles__$3=undefined;const __vue_scope_id__$3=undefined;const __vue_module_identifier__$3=undefined;const __vue_is_functional_template__$3=false;function __vue_normalize__$3(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component=(typeof script==="function"?script.options:script)||{};component.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-table\\src\\cell\\html.vue";if(!component.render){component.render=template.render;component.staticRenderFns=template.staticRenderFns;component._compiled=true;if(functional)component.functional=true}component._scopeId=scope;return component}var cellHtml=__vue_normalize__$3({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},__vue_inject_styles__$3,__vue_script__$3,__vue_scope_id__$3,__vue_is_functional_template__$3,__vue_module_identifier__$3,undefined,undefined);var script$2={extends:cellBase,computed:{pickedProp(){return this.cfg.pickedProp||this.$parent.pickedProp||this.column.id||"picked"},picked:{get(){return this.row[this.pickedProp]},set(value){this.acceptChange(this.pickedProp,value,!value,this.$el.firstElementChild)}}}};const __vue_script__$4=script$2;var __vue_render__$4=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("label",{class:["row-picker",_vm.classes.label],style:_vm.styles.label},[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.picked,expression:"picked"}],class:_vm.classes.input,style:_vm.styles.input,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(_vm.picked)?_vm._i(_vm.picked,null)>-1:_vm.picked},on:{change:function($event){var $$a=_vm.picked,$$el=$event.target,$$c=$$el.checked?true:false;if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.picked=$$a.concat([$$v]))}else{$$i>-1&&(_vm.picked=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.picked=$$c}}}}),_vm._v(" "),_vm.cfg.showRowNumber?_c("span",{class:_vm.classes.span,style:_vm.styles.span},[_vm._v(_vm._s(_vm.groupRow?_vm.rowIndex-_vm.groupRow.rowIndex:_vm.rowIndex+1))]):_vm._e(),_vm._v(" "),_vm.cfg.showContent?_c("span",{class:_vm.classes.span,style:_vm.styles.span},[_vm._v(_vm._s(_vm.content))]):_vm._e()])};var __vue_staticRenderFns__$4=[];__vue_render__$4._withStripped=true;const __vue_inject_styles__$4=undefined;const __vue_scope_id__$4=undefined;const __vue_module_identifier__$4=undefined;const __vue_is_functional_template__$4=false;function __vue_normalize__$4(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component=(typeof script==="function"?script.options:script)||{};component.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-table\\src\\cell\\row-picker.vue";if(!component.render){component.render=template.render;component.staticRenderFns=template.staticRenderFns;component._compiled=true;if(functional)component.functional=true}component._scopeId=scope;return component}var cellRowPicker=__vue_normalize__$4({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},__vue_inject_styles__$4,__vue_script__$4,__vue_scope_id__$4,__vue_is_functional_template__$4,__vue_module_identifier__$4,undefined,undefined);var script$3={extends:cellBase,methods:{cancelChange($event){$event.target.value=this.value}}};const __vue_script__$5=script$3;var __vue_render__$5=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("input",{class:["text-editor",_vm.classes.input],style:_vm.styles.input,attrs:{type:"text"},domProps:{value:_vm.value},on:{keyup:[function($event){if(!("button"in $event)&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")){return null}_vm.acceptChange(_vm.column.id,$event.target.value,_vm.value,$event.target)},function($event){if(!("button"in $event)&&_vm._k($event.keyCode,"esc",27,$event.key,"Escape")){return null}return _vm.cancelChange($event)}],blur:_vm.cancelChange}})};var __vue_staticRenderFns__$5=[];__vue_render__$5._withStripped=true;const __vue_inject_styles__$5=undefined;const __vue_scope_id__$5=undefined;const __vue_module_identifier__$5=undefined;const __vue_is_functional_template__$5=false;function __vue_normalize__$5(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component=(typeof script==="function"?script.options:script)||{};component.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-table\\src\\cell\\text-editor.vue";if(!component.render){component.render=template.render;component.staticRenderFns=template.staticRenderFns;component._compiled=true;if(functional)component.functional=true}component._scopeId=scope;return component}var cellTextEditor=__vue_normalize__$5({render:__vue_render__$5,staticRenderFns:__vue_staticRenderFns__$5},__vue_inject_styles__$5,__vue_script__$5,__vue_scope_id__$5,__vue_is_functional_template__$5,__vue_module_identifier__$5,undefined,undefined);var script$4={extends:cellBase,methods:{cancelChange($event){$event.target.value=this.value}}};const __vue_script__$6=script$4;var __vue_render__$6=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("input",{class:["number-editor",_vm.classes.input],style:_vm.styles.input,attrs:{type:"number"},domProps:{value:_vm.value},on:{keyup:[function($event){if(!("button"in $event)&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")){return null}_vm.acceptChange(_vm.column.id,$event.target.value,_vm.value,$event.target)},function($event){if(!("button"in $event)&&_vm._k($event.keyCode,"esc",27,$event.key,"Escape")){return null}return _vm.cancelChange($event)}],blur:_vm.cancelChange}})};var __vue_staticRenderFns__$6=[];__vue_render__$6._withStripped=true;const __vue_inject_styles__$6=undefined;const __vue_scope_id__$6=undefined;const __vue_module_identifier__$6=undefined;const __vue_is_functional_template__$6=false;function __vue_normalize__$6(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component=(typeof script==="function"?script.options:script)||{};component.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-table\\src\\cell\\number-editor.vue";if(!component.render){component.render=template.render;component.staticRenderFns=template.staticRenderFns;component._compiled=true;if(functional)component.functional=true}component._scopeId=scope;return component}var cellNumberEditor=__vue_normalize__$6({render:__vue_render__$6,staticRenderFns:__vue_staticRenderFns__$6},__vue_inject_styles__$6,__vue_script__$6,__vue_scope_id__$6,__vue_is_functional_template__$6,__vue_module_identifier__$6,undefined,undefined);const component$2={props:{idProp:{type:String,required:false,default:"id"},pickedProp:{type:String,required:false,default:"picked"},withoutThead:{type:Boolean,required:false,default:false},columns:{type:Array,required:true},rows:{type:Array,required:false,default(){return[]}},classes:{type:Object,required:false,default(){return{}}},styles:{type:Object,required:false,default(){return{}}},group:{type:[String,Object],required:false}},computed:{$_columnsLeaf(){return flatten$1(this.columns)},$_group(){return typeof this.group==="string"?{prop:this.group}:this.group},$_groupedRows(){if(!this.$_group)return null;return groupRows(this.rows,this.$_group)},selection(){if(!this.rows)return[];else return this.rows.filter(r=>r[this.pickedProp])}},components:{"st-colgroup":colgroup,"st-thead":thead,"st-cell-text":cellText,"st-cell-html":cellHtml,"st-cell-row-picker":cellRowPicker,"st-cell-text-editor":cellTextEditor,"st-cell-number-editor":cellNumberEditor},methods:{$_getCellComponent(column){if(!column.cell){return(typeof this.cell==="object"?this.cell.component:this.cell)||"st-cell-text"}else{return(typeof column.cell==="object"?column.cell.component:column.cell)||"st-cell-text"}},reemitCellChangeEvent($event){this.$emit("cell-change",$event)},deleteSelection(){this.selection.forEach(r=>this.$delete(this.rows,this.rows.indexOf(r)))}},watch:{selection(newValue,oldValue){this.$emit("selection-change",newValue,oldValue)}}};const __vue_script__$7=component$2;var __vue_render__$7=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("table",{class:["st-table",_vm.classes.table],style:_vm.styles.root},[_c("st-colgroup",{tag:"colgroup",attrs:{columns:_vm.columns}}),_vm._v(" "),!_vm.withoutThead?_c("st-thead",{tag:"thead",attrs:{columns:_vm.columns,classes:_vm.classes.thead,styles:_vm.styles.thead}}):_vm._e(),_vm._v(" "),_c("tbody",{class:_vm.classes.tbody,style:_vm.styles.tbody},[_vm._l(_vm.$_groupedRows,function(groupRow){return _vm.group?[_c("tr",{key:groupRow.rowIndex,class:["st-group-row",_vm.classes.groupRow],style:_vm.styles.groupRow},[_c("td",{class:["st-group-cell",_vm.classes.groupCell],style:_vm.styles.groupCell,attrs:{colspan:_vm.$_columnsLeaf.length}},[_c(_vm.$_getCellComponent(_vm.$_group),{tag:"component",attrs:{"column-index":0,column:{id:"id",cell:_vm.$_group.cell},"row-index":groupRow.rowIndex,row:groupRow},on:{"cell-change":_vm.reemitCellChangeEvent}})],1)]),_vm._v(" "),_vm._l(groupRow.rows,function(row,rowIndex){return _c("tr",{key:groupRow.rowIndex+rowIndex+1,class:["st-row",_vm.classes.row],style:_vm.styles.row},_vm._l(_vm.$_columnsLeaf,function(column,columnIndex){return _c("td",{key:column.id,class:["st-cell",_vm.classes.cell],style:_vm.styles.cell,on:{click:function($event){$event.stopPropagation();_vm.$emit("cell-click",{rowIndex:rowIndex,row:row,columnIndex:columnIndex,column:column,row:row,column:column,target:$event.target})}}},[_c(_vm.$_getCellComponent(column),{tag:"component",attrs:{"column-index":columnIndex,column:column,"row-index":groupRow.rowIndex+rowIndex+1,row:row,"group-row":groupRow},on:{"cell-change":_vm.reemitCellChangeEvent}})],1)}))})]:_vm._e()}),_vm._v(" "),!_vm.group?_vm._l(_vm.rows,function(row,rowIndex){return _c("tr",{key:row[_vm.idProp]||rowIndex,class:["st-row",_vm.classes.row],style:_vm.styles.row},_vm._l(_vm.$_columnsLeaf,function(column,columnIndex){return _c("td",{key:column.id,class:["st-cell",_vm.classes.cell],style:_vm.styles.cell,on:{click:function($event){$event.stopPropagation();_vm.$emit("cell-click",{rowIndex:rowIndex,row:row,columnIndex:columnIndex,column:column,row:row,column:column,target:$event.target})}}},[_c(_vm.$_getCellComponent(column),{tag:"component",attrs:{"column-index":columnIndex,column:column,"row-index":rowIndex,row:row},on:{"cell-change":_vm.reemitCellChangeEvent}})],1)}))}):_vm._e()],2)])};var __vue_staticRenderFns__$7=[];__vue_render__$7._withStripped=true;const __vue_inject_styles__$7=undefined;const __vue_scope_id__$7=undefined;const __vue_module_identifier__$7=undefined;const __vue_is_functional_template__$7=false;function __vue_normalize__$7(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component=(typeof script==="function"?script.options:script)||{};component.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-table\\src\\table.vue";if(!component.render){component.render=template.render;component.staticRenderFns=template.staticRenderFns;component._compiled=true;if(functional)component.functional=true}component._scopeId=scope;return component}var table=__vue_normalize__$7({render:__vue_render__$7,staticRenderFns:__vue_staticRenderFns__$7},__vue_inject_styles__$7,__vue_script__$7,__vue_scope_id__$7,__vue_is_functional_template__$7,__vue_module_identifier__$7,undefined,undefined);return table});
//# sourceMappingURL=true