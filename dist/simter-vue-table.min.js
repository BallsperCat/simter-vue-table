/*!
* simter-vue-table v0.4.0
* @author RJ.Hwang <rongjihuang@gmail.com>
* @license MIT
*/
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global["simter-vue-table"]={})})(this,function(exports){"use strict";
/*!
  * simter-vue-colgroup v0.3.0
  * @author RJ.Hwang <rongjihuang@gmail.com>
  * @license MIT
  */const component={replace:true,props:{columns:{type:Array,required:true}},computed:{widthArray(){return flatten(this.columns)}}};const flatten=columns=>columns.reduce((a,b)=>a.concat(b.children?flatten(b.children):b.width||b),[]).map(a=>typeof a==="object"?a.width:a);const __vue_script__=component;var __vue_render__=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("colgroup",_vm._l(_vm.widthArray,function(width,index){return _c("col",{key:index,style:{width:width}})}))};var __vue_staticRenderFns__=[];__vue_render__._withStripped=true;const __vue_inject_styles__=undefined;const __vue_scope_id__=undefined;const __vue_module_identifier__=undefined;const __vue_is_functional_template__=false;function __vue_normalize__(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component$$1=(typeof script==="function"?script.options:script)||{};component$$1.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-colgroup\\src\\colgroup.vue";if(!component$$1.render){component$$1.render=template.render;component$$1.staticRenderFns=template.staticRenderFns;component$$1._compiled=true;if(functional)component$$1.functional=true}component$$1._scopeId=scope;return component$$1}var colgroup=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,undefined,undefined);
/*!
  * simter-vue-thead v0.3.2
  * @author RJ.Hwang <rongjihuang@gmail.com>
  * @license MIT
  */const component$1={replace:true,props:{columns:{type:Array,required:true},classes:{type:String|Object|Array,required:false,default(){return[]}},styles:{type:String|Object|Array,required:false,default(){return{}}}},computed:{rows(){return transform(deepClone(this.columns))},$_classes(){if(typeof this.classes==="string"||Array.isArray(this.classes))return{thead:this.classes};else if(typeof this.classes==="object")return this.classes;else return{}},$_styles(){if(typeof this.styles==="string"||Array.isArray(this.styles))return{thead:this.styles};else if(typeof this.styles==="object")return this.styles;else return{}}}};function transform(columns){columns=polishing(columns);columns.forEach(column=>{descendantDepth(column);leafCount(column)});const rows=flattenWithSelf(columns,true).reduce(function(result,column){if(!result[column.$_rowIndex])result[column.$_rowIndex]=[column];else result[column.$_rowIndex].push(column);return result},[]);rows.forEach(row=>{row.forEach(column=>{if(column.$_depth===0){const depth=row.filter(c=>c!==column).reduce((a,b)=>Math.max(a,b.$_depth),0);if(depth>0)column.rowspan=depth+1}})});rows.forEach(row=>{row.forEach(column=>{delete column.$_rowIndex;delete column.$_depth})});return rows}function polishing(columns){for(let i=0;i<columns.length;i++){const column=columns[i];if(typeof column==="object"){if(column.children)column.children=polishing(column.children)}else columns[i]={label:column}}return columns}function descendantDepth(column){if(!column.hasOwnProperty("$_rowIndex"))column.$_rowIndex=0;let d;if(column.children&&column.children.length>0){d=0;column.children.forEach(child=>{child.$_rowIndex=column.$_rowIndex+1;d=Math.max(d,descendantDepth(child))});d++}else d=0;column.$_depth=d;return d}function leafCount(column){let count;if(column.children&&column.children.length>0){count=0;column.children.forEach(child=>{count+=leafCount(child)})}else count=1;if(count>1)column.colspan=count;return count}function flattenWithSelf(columns,removeChildren=true){let result=columns.reduce((a,b)=>{if(b.children){return a.concat(b,flattenWithSelf(b.children,removeChildren))}else return a.concat(b)},[]);if(removeChildren)result.forEach(column=>{if(column.hasOwnProperty("children"))delete column.children});return result}function deepClone(obj){let copy;if(null==obj||"object"!==typeof obj)return obj;if(obj instanceof Date){copy=new Date;copy.setTime(obj.getTime());return copy}if(obj instanceof Array){copy=[];for(let i=0,len=obj.length;i<len;i++){copy[i]=deepClone(obj[i])}return copy}if(obj instanceof Object){copy={};for(let attr in obj){if(obj.hasOwnProperty(attr))copy[attr]=deepClone(obj[attr])}return copy}throw new Error("Unable to copy obj! Its type isn't supported.")}const __vue_script__$1=component$1;var __vue_render__$1=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("thead",{class:_vm.$_classes.thead,style:_vm.$_styles.thead},_vm._l(_vm.rows,function(row,rowIndex){return _c("tr",{key:"row-"+rowIndex,class:_vm.$_classes.tr,style:_vm.$_styles.tr},_vm._l(row,function(cell,cellIndex){return _c("th",{key:"cell-"+cellIndex,class:cell.class||_vm.$_classes.th,style:cell.style||_vm.$_styles.th,attrs:{colspan:cell.colspan,rowspan:cell.rowspan}},[_vm._v(_vm._s(cell.label||cell))])}))}))};var __vue_staticRenderFns__$1=[];__vue_render__$1._withStripped=true;const __vue_inject_styles__$1=undefined;const __vue_scope_id__$1=undefined;const __vue_module_identifier__$1=undefined;const __vue_is_functional_template__$1=false;function __vue_normalize__$1(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component$$1=(typeof script==="function"?script.options:script)||{};component$$1.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-thead\\src\\thead.vue";if(!component$$1.render){component$$1.render=template.render;component$$1.staticRenderFns=template.staticRenderFns;component$$1._compiled=true;if(functional)component$$1.functional=true}component$$1._scopeId=scope;return component$$1}var thead=__vue_normalize__$1({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},__vue_inject_styles__$1,__vue_script__$1,__vue_scope_id__$1,__vue_is_functional_template__$1,__vue_module_identifier__$1,undefined,undefined);const component$2={replace:true,props:{thead:{type:Boolean,required:false,default(){return true}},columns:{type:Array,required:true},rows:{type:Array,required:false,default(){return[]}},classes:{type:String|Object|Array,required:false,default(){return{}}},styles:{type:String|Object|Array,required:false,default(){return{}}}},computed:{columnsLeaf(){return flatten$1(this.columns)},$_classes(){if(typeof this.classes==="string"||Array.isArray(this.classes))return{table:this.classes};else if(typeof this.classes==="object")return this.classes;else return{}},$_styles(){if(typeof this.styles==="string"||Array.isArray(this.styles))return{table:this.styles};else if(typeof this.styles==="object")return this.styles;else return{}}},components:{"st-colgroup":colgroup,"st-thead":thead}};function flatten$1(columns){return columns.reduce((a,b)=>a.concat(b.children?flatten$1(b.children):b),[])}const __vue_script__$2=component$2;var __vue_render__$2=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("table",{class:_vm.$_classes.table,style:_vm.$_styles.table},[_c("st-colgroup",{tag:"colgroup",attrs:{columns:_vm.columns}}),_vm._v(" "),_vm.thead?_c("st-thead",{tag:"thead",attrs:{columns:_vm.columns,classes:_vm.$_classes.thead,styles:_vm.$_styles.thead}}):_vm._e(),_vm._v(" "),_c("tbody",{class:_vm.$_classes.tbody,style:_vm.$_styles.tbody},_vm._l(_vm.rows,function(row,index){return _c("tr",{key:row.id||index,class:_vm.$_classes.tr,style:_vm.$_styles.tr},_vm._l(_vm.columnsLeaf,function(column){return _c("td",{key:column.id,class:column.class||_vm.$_classes.td,style:column.style||_vm.$_styles.td},[_vm._v(_vm._s(row[column.id]))])}))}))])};var __vue_staticRenderFns__$2=[];__vue_render__$2._withStripped=true;const __vue_inject_styles__$2=undefined;const __vue_scope_id__$2=undefined;const __vue_module_identifier__$2=undefined;const __vue_is_functional_template__$2=false;function __vue_normalize__$2(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component=(typeof script==="function"?script.options:script)||{};component.__file="D:\\work\\github-simter\\simter-vue\\simter-vue-table\\src\\table.vue";if(!component.render){component.render=template.render;component.staticRenderFns=template.staticRenderFns;component._compiled=true;if(functional)component.functional=true}component._scopeId=scope;return component}var table=__vue_normalize__$2({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,undefined,undefined);exports.default=table;exports.flatten=flatten$1;Object.defineProperty(exports,"__esModule",{value:true})});
//# sourceMappingURL=true